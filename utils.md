蓝牙调试工具：e调试、lightblue

教程

- 设计网站
  - wps：有些基础的模板
  - [稿定设计](https://www.gaoding.com/)
  - ai绘画
    - https://cgdream.ai
- 串口屏
  - 淘金驰：https://www.bilibili.com/video/BV1YL41147HX
  - 迪文
    - 入门：[迪文科技Official投稿视频-迪文科技Official视频分享-哔哩哔哩视频 (bilibili.com)](https://space.bilibili.com/1074986312/video?tid=0&special_type=&pn=1&keyword=&order=stow)
    - demo
      - https://space.bilibili.com/519563359
      - [大东大东大东大东的个人空间-大东大东大东大东个人主页-哔哩哔哩视频 (bilibili.com)](https://space.bilibili.com/1284347612)
      - [DEMO例程](http://inforum.dwin.com.cn:20080/forum.php?mod=forumdisplay&fid=63)
      - [【新提醒】【开源】智能培养室 - T5L主控应用实战方案 - 迪文科技论坛 - Powered by Discuz! (dwin.com.cn)](http://inforum.dwin.com.cn:20080/forum.php?mod=viewthread&tid=9586&extra=page%3D1)
      - 
    - [问题汇总](https://chengpeng19931015.gitbook.io/faq/untitled-16)




## CubeMX

：提高stm32的开发效率

功能（口诀：饮食外带，哈哈）

- 引脚配置：
- 时钟树配置：
- 外设配置：
- 代码库集成：集成了LL库和HAL库
- RTOS配置：
- 提供了示例代码：
- 生成初始化代码：



常见操作

- 新建工程



## keil

：用keil来新建工程简直反人类啊，链路太长了，容错率太低了



## xcom

:串口调试工具

能够把电脑发送的数据转成串口数据



#### e调试

:蓝牙调试工具，能够成为蓝牙角色，能够代表蓝牙模块发送和接收串口数据



## 迪文串口屏

核心关注点

- 设计能力
- 素材制作速度
- 常见的控件制作





目标

- 显示背景图
- 显示文字
- 添加交互：如点击跳转、拖动
- 数据同步
- 图片尺寸的调整

- 数据录入
- 弹窗显示



#### 增量调节

按钮返回

- 就是在松开的时候能够返回值
- 与增量调节相反，增量调节是按住的时候就会返回值了

为啥增量调节配置按钮效果不显示的？

- 



长按时一直发送一个固定的数值给我就行了，不需要值加加

- 比如我指向要一直升的信号就行了



#### 变量图标

值如果是0-9，而不是0-1，怎样确保图标是能对应上的？

- 你需要准备10张图片，而且命名要连续，只需要指定起点和结尾即可，它会对应上



如果你只需要一张图片，也可以用变量图标

- 



#### 数据返回

：分持续按压和松开按压

为啥没有上报到串口？

- 因为单位不对，至少要2个字节，而且要为偶数，而你配置了1个字节



#### 按键返回

：可以往某个地址写入数据



#### 对齐

如何实现多个图标对齐的？

- 只需要指定一个参考物即可



#### 待机&唤醒

- 只需要修改CFG文件即可，有些配置支持图形化，有些则是



#### CFG文件

- 有时候需要把配置文件烧进去，而且cfg文件的烧入只能走sd卡

有时候配置不生效可能是22文件没写进去

- 不是cfg文件



#### 32文件

只要页面素材发生改变就要重新生成32文件，48同理

如果是中途修改某个页面，不用先删除后添加

- 跑到DWIN_SET中直接替换
- 然后再重新生成32文件即可



#### 48文件

- 直接选中文件然后生成48文件，如果已有则是覆盖即可

注意

- 不用手动复制到48文件夹里



#### 显示ascii字符

需要选GBK编码，默认的8bit编码会显示异常，坑啊



#### 显示中文

2种方式

- 图片
- 字体库

图片

- 用ps写好即可

首先要生成字体库，0号的

修改文字颜色



#### 汉字录入

：需要字库和输入法，比较麻烦，而且一般不需要录入汉字，只需要显示汉字和录入数字即可

DGUSII文本显示（灰度字库）

优点

- 相比普通文本显示：它的文本显示更加清晰，消除了锯齿

缺点

- 制作比较麻烦

普通文本显示

步骤

- 制作23号字库文件
- 配置文本显示控件
  - 记得要指定正确的编码和点阵数
- 



#### 数字录入

步骤

- 准备键盘素材、0号字体库
- 配置数字录入
- 基础触控



#### 弹窗

弹窗其实是跳转到另一个界面，但是我当前界面的一些状态该如何显示？要保持吗？还是全部置空？

打开弹窗：用数据返回，往地址00e8写数据即可

- 数据格式：5a01+页面id，id用2个字节表示，比如20就用0014

关闭弹窗

- 往地址00e8写入00000000，即可



#### 变量动画

：用icon实现，配置一下开始、结束，还有单个显示时长即可，一般为20

开始值：让动画开始的值

停止值：让动画停止的值



坑

- 图形控件本身要占用地址，比如变量图标（占用1个字），变量动画（占用2个字），所以要从VP+2开始
  - 如果变量动画你下个地址+1，那么可能会导致动画



#### 仪表盘



#### 数据窗口+滑动调节





#### 设计问题

需要选择不同类型的（数字量），比如低、中、高

- 空间比较小：做成滚动的
- 空间较大：同时展示，做成多排，然后点击选中
- 滑动调节



模拟量

- 滑动调节



图标

- 做成圆形或者是椭圆
- 可以分上下，上面图标下面文字，也可以直接显示为图标



开关

- 可以用颜色来区分：蓝色高亮表示选中，灰色表示未选中
- 可以用文字提示

激活状态的按钮大一点好，这样可以减少对齐的工作，而且更加显眼

图标边框最好不要搞小圆角，不然设置图片显示透明的时候，会擦除不干净

- 

激活颜色

- #35f5fb：浅蓝色
- #ffffff：白色



自制的字库支不支持改文字大小？

- 不支持，你制作字库时定了多少点阵，你使用时就多少点阵
- ascii能支持动态改大小，其实是它把一定范围内的大小都生成一遍放到同一个文件里



#### 坑

- 最耗时的环节：产品设计+素材制作
- 点阵数需要为偶数，而且不能过大



#### 常见问题

- 版本的坑：增量配置了按钮效果不生效，原来是23.icl有限制，改成32就有了
- 命名规则
  - 32-背景.icl
  - 48-图标.icl
  - 23-汉字
  - 文件命名不要连续，要空一下底图
- 显示与控制要分开配置，有2种类型的控件
  - 而且是针对同一个地址

- 进制要用16进制
  - 不要老是用10进制直接写进入，写值都是要用16进制的，比如你要指向20，那就是0x14，做弹窗的时候

- 变量图标不显示
  - 可能是你48文件忘记写入
- 限制条件
  - 串口下载不能下载CFG文件，只能走SD下载
  - 字节长度最好是双字节，单字节容易出问题，比如不上报
- 如何开启竖屏？
  - CFG文件，配置上电方向为0°或者是90°，跟设备有关
- 点一下按钮会闪怎么做？是算按钮效果吗？
  - 需要准备一张不带按钮的底图，然后配置按钮效果
- 软件里图标怎么旋转，怎么调整大小？
- 显示模式：显示背景、透明
  - 显示背景：默认透明图片会加个白色背景
  - 透明：背景透明图片就会才会显示为透明显示
- 如果我只是想显示一张图片，用变量图标还是艺术字？
  - 用变量图标即可
- 怎么判断32号文件过大有没有占用到后面的空间，需要把后面的文件命名往后挪？
  - DWIN的是flash是每块256KB的大小，所以32文件超过5MB就要考虑一下重新计算了
- 变量地址是按字为单位，而不是字节为单位的
  - 文件才是以字节为单位的，比如22文件
- 项目写入失败
  - 可能是驱动的问题
  - 有时候就是需要重新插拔一下
  - 项目类型改了
- 如何找做好看的设计？
  - 横屏：可以通过wps自带的模板
- 写入注意事项

  - 重新生成ICL文件时
- 长按时显示另一个图标
  - 是通过配置底图来实现的，然后指定按钮效果
- 地址是要每一页都从1000开始，到0xFFFF
- 变量图标完全不显示，如何处理？
- 描述指针有啥用？
  - 隐藏、移动图标需要用到描述指针
- 显示静态的图标
  - 最好做到页面里面去，而不是用变量图标去搞
- 图片类型：4:1:1与4:4:4区别？
  - 后者才是颜色显示比较全面的
- 页面中的编号和文件名数字要对应的上
  - 不然配置按钮效果会不生效，比如编号99，但是文件名为6xxx
- 为啥不用增量调节，而是用按键返回去做开关控制？
- 选按键返回还是增量调节？
  - 多个控件状态是独立的，可以用增量调节或者是同步数据
  - 非独立，有关联：则使用按键返回，因为操作的是同一个地址的数据
- RTC真机无法显示，全部为0
  - 只有支持RTC硬件的才能正常显示

- VP1S与VP1T是啥？都是地址，一般是读取VP1S地址的数据写到VP1T的地址
  - VP1S是第一次按压时，读取数据的地址
  - VP1T则是第一按压时，写入数据的地址
  - 那是先写，还是写读？先写入

- 发个新的开发文档给我？
- VP变量地址与SP描述指针地址有啥区别？
- SP描述指针能干吗？
  - 可以修改文字的大小、颜色、位置，看7.3.2节

- 左侧的图片预览不显示？
  - 有时候添加有一定概率会失败，你需要重新添加一下，也有可能是文件被占用着你先把项目关掉

- 要先把尺寸换成屏幕大小，后面再来切图
  - 不然你先切会导致大小不是你想要的，可能偏大或偏小

- 0号字库与DGUS字库生成有啥区别？
- 为啥自定义的字体文件不能显示英文？只能显示中文，显示英文直接乱码，比如23-宋体
  - 能显示，只是我点整数错了，应该要为偶数才能正常显示，比如45就不能，40可以

- 
