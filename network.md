教程

- [【实验全过程】网络5层模型及数据包封装配置解析，一次性给你讲透_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1jV4y1v72s/?p=11&spm_id_from=pageDriver)
- [第五十七课：套接字简介_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV18e4y1Z7qd/?spm_id_from=333.337.search-card.all.click&vd_source=522153461914a766fc002cc8619314e4)



## 关注点

嵌入式中常见的网络协议

- TCP/IP
  - UDP
  - HTTP/HTTPS
- MQTT
- Bluetooth
- WiFi
- CAN
- LoRa
- Modbus



## 问题

网络为什么要设计5层协议？

：每一层都有负责的场景，根据场景的复杂度来决定所需要的协议，比如不需要跨网络传输，就可以考虑到数据链路层的协议即可，如以太网、wifi协议

以下以数据帧的封装为例

- 应用层：负责应用程序之间的数据传输

  - 代表协议：http、https、mqtt、coap、smtp，口诀：schm
  - 不需要加什么，只需要定义数据格式即可，它本身就是数据，以http为例，会有请求头（会有请求方法，内容类型），请求体啥的

- 传输层：负责端到端的数据传输

  - 代表协议：tcp、udp
  - 加上传输层头部，比如TCP头部（源与目标的端口号，序列包，序列号用于排序），得到数据段
  - 端口号由传输层来分配和决定的，应用层只是能决定使用哪个端口号，而且一个端口某一时刻只能被一个应用监听
  - 什么情况下通信只需要传输层，不用用到应用层？
    - 这种一般是传输文件时，或者是你自己创建tcp连接时，就只会用到传输层，不需要做应用层的高级解析

- 网络层：负责跨网络的数据传输

  - 代表协议：ip、icmp
  - 加上ip信息，比如源和目标ip，得到数据包
  - 什么情况下通信，只需要用到网络层？
    - ping测试的时候，就是不需要用到传输层

- 数据链路层：负责相邻节点之间的数据传输，负责物理寻址

  - 代表协议：ethernet、wifi、bluebooth、rs
  - 负责锁定目标设备，加上mac地址信息，比如源和目标，得到数据帧
  - 什么情况下，只需要用到数据链路层协议？
    - 设备直连的情况下，不需要用到路由器之类的，比如2个电脑通过网线直连，或者是wifi、以太网
  - 为啥知道mac地址，就能正确发送了？
    - 知道mac地址，它就只会往那个mac地址的连接发送数据了
  - 以太网连接与wifi连接区别？
    - 

- 物理层：负责传输比特流，一切都需要靠这玩意，不然就没有通信的通道了，定啥格式都没用

  - 不需要协议，直接传输数据帧
  - 物理层实现有哪些方式？
    - 有线
      - ethernet、usb、hdmi
    - 无线：电磁波、声波
      - 无线电波
      - 红外

  

什么是网络协议？

- 用于不同计算机之间的通信

怎么决定需要哪种协议？或者说怎么判断协议处于哪一层？



什么是总线协议？

- 总线协议基本都是有线的

数据的封装与解封装

- 封装：拼接对应的头
- 解封装：移除对应的头

啥是数据帧：即数据按一定的格式编写，用于传输

电脑上的端口号与串口有啥区别？

- 端口号是用于网络通信的，是应用程序与应用程序进行通信的
  - 如http的80端口
- 串口号，是虚拟或物理的，用于计算机与外部设备进行串口通信
  - 如

以太网命名由来

- 以太被认为是上层大气，作者表示这种网络像以太承载光那样承载比特，连接无数电脑传递信息

套接字命名由来？

- 类似于管道，叫socket好，socket绑定了ip和端口，所以可以通信

接口：ip+端口

不通过监听端口号，可以获取发送到当前电脑的数据吗？

- 可以，通过监听网络接口即可，就可以获取到发送到本机的所有网络数据包
